<!doctype HTML>
<html>
  <head>
    <title>jQuery json-viewer</title>
    <meta charset="utf-8" />
    <script src="package/HtmlViewer.js"></script>
     <!--script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.5.3/showdown.js"></script-->
    <link href="package/jsonviewer.min.css" type="text/css" rel="stylesheet" />

    <style type="text/css">
body {
  margin: 0 100px;
  font-family: sans-serif;
}
/*
textarea#json-input {
  width: 100%;
  height: 200px;
}
*/
pre#json-renderer {
  border: 1px solid #aaa;
  padding: 0.5em 1.5em;
}
    </style>
  </head>
  <body>
    <pre id="json-renderer"></pre>
	<pre id="json-renderer2"></pre>
    <div id="md"></div>
   <script>
		var HtmlViwer = function(url, type, target) {
           		$.get(url,
				{md:'http://jsonviewer.qalet.com/js/showdown/README.md'},
				function(data) {
					if (type == 'md') {
						var converter = new showdown.Converter();
						target.html(converter.makeHtml(data));
					}	
					if (type == 'json') {
						var options = {
						  collapsed: false,
						  withQuotes: true
						};
						target.jsonViewer(jQuery.parseJSON(data), options);   
					}
					if (type == 'xml') {
						
						var x2js = new X2JS();
						console.log('data--->');
						console.log(data);
						var jsonObj = x2js.xml_str2json( data );
						console.log(jsonObj);
						var options = {
						  collapsed: false,
						  withQuotes: true
						};
						target.jsonViewer(jsonObj, options);  	
					}	
				},'text'
           );  		
		};
		HtmlViwer('http://docviewer.qalet.com/README.md', 'md',  $('#md'));
		HtmlViwer('http://docviewer.qalet.com/api/data.js', 'json',  $('#json-renderer'));
		HtmlViwer('http://docviewer.qalet.com/data.xml', 'xml',  $('#json-renderer2'));
    </script>
    
  </body>
</html>
